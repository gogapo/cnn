<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"> <!-- Impede zoom -->
    <title>Verificador de Contribuintes</title>
    <style>
        body {
            font-family: Helvetica, sans-serif; /* Fonte Helvetica */
            background-color: white; /* Fundo branco */
            text-align: left; /* Alinhamento à esquerda */
            margin: 0; /* Remover margens padrão */
            padding: 0; /* Remover padding padrão */
        }

        .container {
            background-color: white; /* Cor de fundo da caixa para branco */
            padding: 20px; /* Espaçamento interno */
            border-radius: 8px; /* Bordas arredondadas */
            width: calc(100% - 40px); /* Largura com margem de 20px em cada lado */
            margin: 20px auto; /* Margem superior/inferior de 20px e centraliza horizontalmente */
            box-sizing: border-box; /* Inclui padding e bordas no cálculo da largura */
        }

        h1 {
            color: #333;
            display: none; /* Ocultar inicialmente */
        }

        .instruction {
            font-size: 14px; /* Tamanho menor para instrução */
            color: #555; /* Cor do texto da instrução */
            margin-top: 5px;
            display: none; /* Ocultar inicialmente */
        }

        input[type="text"] {
            padding: 10px;
            width: 100%; /* Largura total */
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 20px;
            display: none; /* Ocultar inicialmente */
            font-size: 16px; /* Tamanho da fonte do input */
        }

        button {
            padding: 10px 20px;
            background-color: #007bff; /* Cor azul */
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: none; /* Ocultar inicialmente */
        }

        button:hover {
            background-color: #0056b3; /* Cor azul escuro no hover */
        }

        #loading {
            font-size: 24px;
            color: #003366; /* Azul cobalto */
            display: block; /* Mostrar sempre durante o carregamento */
            animation: blink 1s infinite; /* Animação de piscar */
        }

        #loading strong {
            font-weight: bold; /* Negrito para "A CARREGAR" */
        }

        #loading .subtext {
            font-size: 14px; /* Fonte menor para "Aguarde, é rápido" */
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }

        #message {
            font-size: 18px;
            margin-top: 20px;
            display: none; /* Ocultar inicialmente */
        }

        .error {
            color: red;
            font-weight: bold;
        }

        .success {
            color: green;
            font-weight: bold;
        }

        .password-warning {
            font-size: 12px; /* Tamanho menor para a mensagem de segurança */
            color: #d9534f; /* Vermelho para a mensagem de segurança */
            display: none; /* Ocultar inicialmente */
        }

        /* Estilo para as perguntas e respostas */
        h2 {
            font-size: 16px; /* Tamanho da fonte para perguntas */
            margin-top: 20px;
        }

        /* Linha de separação entre perguntas e respostas */
        .separator {
            border-top: 1px solid #ccc;
            margin: 15px 0;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>FUGA DE DADOS</h1> <!-- Título atualizado -->
    <p class="instruction">Insira o número de contribuinte que quer pesquisar e veja se esse número foi apanhado na fuga de dados.</p>
    <div id="loading"><strong>A CARREGAR</strong><br><span class="subtext">Aguarde, é rápido</span></div>
    <input type="text" id="contribuinte" placeholder="Insira o número de contribuinte">
    <button onclick="verificarContribuinte()">Verificar</button>

    <div id="message"></div>
    <p class="password-warning" style="display: none;">O ficheiro que está a circular inclui a password além do número de contribuinte. Este motor de busca só inclui os números de contribuinte e não expõe qualquer password.</p>

    <!-- Texto longo abaixo dos resultados -->
    <div id="informacao" style="display:none;">
        <h2><strong>O que é que se passou?</strong></h2>
        <p>Uma lista com cerca de 15 mil credenciais de acesso ao Portal das Finanças começou a circular online. A existência desta lista - divulgada terça-feira pelo Expresso e à que a CNN Portugal teve acesso - tem o número de contribuinte e as passwords que 15 mil cidadãos utilizam para acederem ao Portal das Finanças. A lista terá sido detetada por causa de um recente ataque à chave móvel digital - a 10 de outubro, as infraestruturas da Agência para a Modernização Administrativa (AMA) foram alvo de um ciberataque. Destas 15 mil passwords, a grande maioria é verdadeira.</p>
        <div class="separator"></div>

        <h2><strong>Quantas passwords foram roubadas mesmo?</strong></h2>
        <p>O Ministério das Finanças (MF) confirmou - em declarações ao Expresso - que 9.000 são verdadeiras e dão acesso indevido às contas pessoais dos cidadãos. Em declarações à CNN Portugal, o MF explica que "os dados constantes da referida lista não resultam de qualquer acesso ilegítimo aos sistemas da Autoridade Tributária mas antes da exfiltração de dados em sistemas de terceiros ou através do comprometimento dos equipamentos dos respetivos utilizadores". "Logo que tomou conhecimento da existência da mesma lista, a Autoridade Tributária desencadeou de imediato o procedimento estabelecido para estas situações, revogando as senhas de acesso comprometidas, obrigando os respetivos contribuintes a substituírem as suas senhas no próximo acesso ao Portal das Finanças."</p>
        <div class="separator"></div>

        <h2><strong>Deve ou não mudar a password?</strong></h2>
        <p>A resposta imediata é sim - para qualquer pessoa. Em declarações à CNN Portugal, José Tribolet, especialista em Cibersegurança, afirma que mudar a password "é uma atuação de higiene informática essencial".</p>
        <div class="separator"></div>

        <h2><strong>Como saber se foi ou não se a password foi roubada?</strong></h2>
        <p>"Nós não sabemos", alerta Tribolet, dizendo que "só os serviços é que eventualmente podem saber que as passwords foram roubadas". No entanto, lembra que há casos em que "há vírus que são infiltrados e que estão a atuar nos sistemas durante muito tempo e não são detetados".</p>
        <div class="separator"></div>

        <h2><strong>Se usar a mesma password noutros sites devo mudá-las?</strong></h2>
        <p>Usar a mesma password em vários sites é "suicídio" e os utilizadores devem ter "um mínimo de higiene informática". José Tribolet diz mesmo que a população que usa normalmente telemóveis devia usar "uma aplicação de cofre digital, onde eu tenho no cofre digital, que está na cloud, os acessos e passwords, tudo". "E quando eu quero aceder a alguma coisa, a única coisa que eu tenho que saber é o código, é a chave do meu cofre digital. Eu digito a chave do cofre digital, abro o cofre digital e vejo qual é a password que eu vou usar para aquela coisa e isso é uma boa prática. E isso permite ter as passwords todas diferentes e não estar preocupado quanto com decorá-las, porque é impossível. É claro que nada é à prova de bala. Tenho a certeza de que a National Security Agency dos Estados Unidos consegue abrir o meu cofre digital. Não tenho dúvidas nenhumas, não é? Só que acho que eu não sou pessoa de interesse para a NSA", afirma. Tribolet deixa ainda outra recomendação: não deixar os códigos em papéis e na carteira.</p>
        <div class="separator"></div>

        <h2><strong>E o que é que os hackers podem fazer com estes dados, assumindo que a lista é verdadeira?</strong></h2>
        <p>Resumidamente, tudo. "Estes dados vendem-se para muitos efeitos", alerta o especialista, acrescentando que "pode fazer-se muita coisa". Segundo José Tribolet, "a partir de momento em que temos o número fiscal e se consegue ter o nome da pessoa, em que se consegue ter o endereço, o número do cartão do cidadão, consegue roubar-se a identidade digital da pessoa".</p>
        <div class="separator"></div>

        <h2><strong>Há um aviso no site do Portal das Finanças, mas não deviam os cidadãos ser alertados de outra forma?</strong></h2>
        <p>Neste momento, o aviso é feito no próprio Portal das Finanças, a dizer que a senha expirou e que tem de ser alterada. No entanto, para o especialista, o aviso devia ser feito através de email e SMS, mas não só. "Devia avisar por todos os meios possíveis e nos jornais. É avisar. Pessoas, é a altura de me mudarem a password", alerta Tribolet.</p>
        <div class="separator"></div>

        <h2><strong>Se isto acontece ao Estado, o que é que o Estado tem a fazer para se proteger?</strong></h2>
        <p>É altura de o Estado mudar a forma de autenticação e passar a usar um segundo fator de autenticação - não só no Portal das Finanças, mas em todos os serviços. "Isto é, quando acedemos, temos que de a password, fazer a identificação. Mas essa identificação tem de ser confirmada. E, tipicamente, hoje o que se faz nessa confirmação é que mandam uma SMS para o nosso telemóvel com um código para nós o colocarmos. Isso já dá uma robustez bastante maior. Não é à prova de mal, mas é muitíssimo superior a tudo o que a gente hoje tem. Sistemas cujo acesso seja apenas o username e o password é imaturo da parte das instituições - é um convite ao desastre." José Tribolet lembra ainda que esta facilidade de acesso é fruto da falta de educação do Estado e dos seus máximos responsáveis "para perceber o que é que é o mundo virtual e para perceber que isto da informática e das tecnologias de informação é muito mais que um problema técnico". O especialista diz ainda que a proteção informática é tão importante como "termos proteção sísmica em Portugal ou proteção contra catástrofes civis", até porque um ciberataque pode paralisar o país por completo, lembra, dando como exemplo os ataques na Ucrânia que paralisaram as centrais elétricas. "É facílimo paralisar completamente um país e uma cidade - de tal maneira que fica tudo como se tivesse havido um terramoto gigantesco. É facílimo."</p>
        <div class="separator"></div>

        <h2><strong>E qual o impacto disto na confiança no Estado?</strong></h2>
        <p>"Se eu for auditar os serviços, e eu trabalhei nisto, consigo encontrar buracos por todo lado. E vai ser muito difícil alguém garantir-me que ninguém alterou aqueles dados", sublinha José Tribolet. "Eu não estou a dizer que eles estão alterados, mas nós precisamos de provas positivas, de garantias, de que os dados são fidedignos e que não foram alterados, não foram hackeados. E não podemos esquecer que uma fonte normal de fazer estes ataques e estas penetrações são as próprias pessoas das organizações. Muitas vezes não são bandidos externos, são pessoas das organizações. Então é preciso proteger contra isso também."</p>

        <!-- Adicionando a palavra "FIM" -->
        <p style="color: #007bff; font-size: 20px; font-weight: bold; margin-top: 20px;">FIM</p>
    </div>
</div>

<script>
    let numerosContribuintes = [];

    // Função para carregar a lista de contribuintes
    function carregarContribuintes() {
        fetch('https://gogapo.github.io/cnn/contribuinte.txt')
            .then(response => response.text())
            .then(text => {
                numerosContribuintes = text.split('\n').map(line => line.trim());
                document.getElementById("loading").style.display = "none"; // Oculta a mensagem de carregamento
                document.querySelector(".instruction").style.display = "block"; // Mostrar a instrução
                document.getElementById("contribuinte").style.display = "block"; // Mostrar o campo de entrada
                document.querySelector("button").style.display = "block"; // Mostrar o botão
                document.querySelector("h1").style.display = "block"; // Mostrar o título
            })
            .catch(error => {
                console.error('Erro ao carregar os números de contribuinte:', error);
                document.getElementById("loading").textContent = "Erro ao carregar dados.";
            });
    }

    // Função para verificar o número de contribuinte
    function verificarContribuinte() {
        const numero = document.getElementById("contribuinte").value;
        const message = document.getElementById("message");
        const passwordWarning = document.querySelector(".password-warning");

        if (numero.length !== 9 || isNaN(numero)) {
            message.textContent = "Por favor, insira um número válido de 9 dígitos.";
            message.className = "error";
            message.style.display = "block"; // Exibir mensagem de erro
            passwordWarning.style.display = "none"; // Ocultar aviso de senha
            document.getElementById("informacao").style.display = "none"; // Ocultar informações adicionais
            return;
        }

        message.style.display = "block"; // Exibir mensagem
        document.getElementById("informacao").style.display = "block"; // Mostrar informações adicionais
        passwordWarning.style.display = "none"; // Ocultar aviso de senha inicialmente

        if (numerosContribuintes.includes(numero)) {
            message.innerHTML = "O número de contribuinte que pesquisou está incluído no ficheiro que está a circular com a fuga de dados (e que contém a password, além do número de contribuinte). Leia o texto em baixo para saber o que está em causa e tomar precauções para resolver o problema e evitar novos.";
            message.className = "error";
            passwordWarning.style.display = "block"; // Mostrar aviso de senha
        } else {
            message.innerHTML = "O número de contribuinte que pesquisou não está incluído no ficheiro que está a circular com a fuga de dados. De qualquer maneira, leia o texto em baixo para tomar precauções e evitar problemas.";
            message.className = "success";
            passwordWarning.style.display = "none"; // Ocultar aviso de senha
        }
    }

    // Capturar evento de tecla pressionada
    document.getElementById("contribuinte").addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            verificarContribuinte();
        }
    });

    // Capturar evento de mudança no input
    document.getElementById("contribuinte").addEventListener("input", function() {
        // Oculta mensagens se o campo não tiver exatamente 9 dígitos
        if (this.value.length !== 9) {
            document.getElementById("message").style.display = "none"; // Ocultar mensagem se o campo não tiver 9 dígitos
            document.getElementById("informacao").style.display = "none"; // Ocultar informações adicionais
            document.querySelector(".password-warning").style.display = "none"; // Ocultar aviso de senha
        } else {
            // Se exatamente 9 dígitos, pode mostrar as informações (mas só se a verificação for feita)
            document.getElementById("message").style.display = "none"; // Ocultar mensagem
            document.getElementById("informacao").style.display = "none"; // Ocultar informações adicionais
        }
    });

    // Carregar os números de contribuinte ao iniciar a página
    window.onload = carregarContribuintes;
</script>

</body>
</html>
